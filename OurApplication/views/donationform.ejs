<!DOCTYPE html>
<html lang="en">
 
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Uploading</title>
</head>


 
<body>
    <form action="/createDonation" method="post" enctype="multipart/form-data">
        <head>
            <title></title>
            <link rel="stylesheet"  href="../../style.css"> 
        </head>
        
        <body > 
        <h1> Create a Donation Listing </h1> 
        
            <div class="formContainer">
        
                <h4>Username: <input name="username"required></h4>
                <p>
                <h4>Food Description: <input name="food_description"></h4>
                <p>
                <h4>Food Type: <input name="food_type"required></h4>
                <p>
                <h4>Food Quantity: <input name="quantity"required></h4>
                <p>
                <h4>Perishability: <input name="perishability"></h4>
                <p>
                <h4>Pick Up Time: <input name="pick_up_time"required></h4>
                <p>
                <h4>Pick Up By: <input name="picked_up_by"></h4>
                <p>
                <h4><label for="food_image">Insert Picture of Your Food Donation:</label>
        
                <div class="form-group">
                    <input
                      type="file"
                      name="image"
                      id="image"
                      class="form-control-file border"
                    />
                </div>
        
                <div class="row">
                    <div class="col-sm-12">
                      <div class="preview-images"></div>
                    </div>
                  </div>
        
                  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js"></script>
                  <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
                  <script>
                    $(document).ready(function() {
                      let imagesPreview = function(input, placeToInsertImagePreview) {
                        if (input.files) {
                          let filesAmount = input.files.length;
                          for (i = 0; i < filesAmount; i++) {
                            let reader = new FileReader();
                            reader.onload = function(event) {
                              $($.parseHTML("<img>"))
                                .attr("src", event.target.result)
                                .appendTo(placeToInsertImagePreview)
                                .height(200)
                                .width(300);
                            };
                            reader.readAsDataURL(input.files[i]);
                          }
                        }
                      };
                      $("#image").on("change", function() {
                        imagesPreview(this, "div.preview-images");
                      });
                    });
                  </script>
               
                <p>
                <h4><input type="submit" value="Submit"/></h4>
                </p>
            </div> 
        </body>
        </form>
 
    <h1>Uploaded Images</h1>
  
    <div>
        <% items.forEach(function(image) { %>
        <div>
            <div>
                <img src="data:image/<%=image.img.contentType%>;base64,
                     <%=image.img.data.toString('base64')%>" width="300" height="200">
                <div>
                    <h5><%= image.name %></h5>
                     
 
<p><%= image.desc %></p>
 
 
                </div>
            </div>
        </div>
        <% }) %>
    </div>
</body>
 
</html>